<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
        <meta name="description" content="A free useless open source link shortener made by @MohsenEMX">
        <meta name="title" content="Link Shortener">
        <meta name="keywords" content="terminal, terminal in web,google,link short,link shorter,short,links, ">
        <meta name="author" content="@MohsenEMX">
        <meta property="og:image" content="assets/og.png" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="./assets/favicon.ico" type="image/x-icon">
        <link rel="stylesheet" href="./assets/style.css">
        <link rel="stylesheet" href="./assets/mstyle.css">
    <title>Link Shortener</title>
</head>
<body>
    <h1 id="yolup"></h1>
    <div class="yes">
        <progress value="0" max="100" id="progressBar"></progress>
        <br />
        <p id="yup">Made by MohsenEMX</p>
    </div>
    
    <script>
        var time = 5000;
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        let parm = urlParams.get('u');
        let parm2 = urlParams.get('t');
        let sec_parm = urlParams.get('q');
        let parm3 = urlParams.get('url');
        if (parm2 != null) {
                time = parm2 * 1000;
                var timeleft = parm2;
            } else if (parm2 == null) {
                var timeleft = 5;
            }
            var countup = 1;
            document.getElementById('progressBar').setAttribute('max',time);
            let x = setInterval(function() {
                if (time <= 0) {
                    document.getElementById('yolup').innerHTML = 'Redirecting Now!';
                    document.title = 'Redirecting Now!';
                    clearInterval(x);
                    r();
                } else {
                    document.getElementById('yolup').innerHTML = 'You\'ll be Redirected In ' + timeleft + ' seconds!';
                    document.getElementById('progressBar').value = countup;
                    if (!(time % 1000)) {
                    timeleft -= 1;
                    }
                    countup += 11;
                    time -= 10;
                    
                }
            },10)
            function r() {
            switch (parm) {
                case 'loop': {
                    // location.href = 'https://s.nashef.ir/?u=loop';
                    redirect('https://s.nashef.ir/?u=loop',100);
                    break;
                }
                case 'g': {
                    // location.href = 'https://google.com';
                    redirect('https://google.com',100);
                    break;
                }
                case 'social': {
                    // location.href = 'https://linktr.ee/MohsenEMX';
                    redirect('https://linktr.ee/MohsenEMX',100);
                    break;
                }
                case 'github': {
                    //location.href = 'https://github.com/MohsenEMX';
                    redirect('https://github.com/MohsenEMX',100);
                    break;
                }
                case 'request': {
                    // location.href = 'https://s.nashef.ir/request';
                    redirect('https://s.nashef.ir/request',100);
                    break;
                }
                case 'links': {
                    //location.href = 'https://s.nashef.ir/urls';
                    redirect('https://s.nashef.ir/urls',100);
                    break;
                }
                case 'a': {
                    //location.href = 'https://www.youtube.com/watch?v=dQw4w9WgXcQ';
                    redirect('https://www.youtube.com/watch?v=dQw4w9WgXcQ',100);
                    break;
                }
                case '0': {
                    console.log('Code 0 does nothing',100);
                    break;
                }
                default: {
                    if (parm3 != null) {
                        redirect(parm3,100);
                    } else {
                        location.href = './404.html';
                    }
                }
                
            }
            if (sec_parm == 0) {
                //location.href = 'https://www.youtube.com/watch?v=dQw4w9WgXcQ';
                redirect('https://www.youtube.com/watch?v=dQw4w9WgXcQ',100)
            }
        }
        function redirect (url,time1) {
            var qq = setInterval(function() {
                location.href = url;
                clearInterval(qq);
            },time1);
        }
    </script>
</body>
</html>
